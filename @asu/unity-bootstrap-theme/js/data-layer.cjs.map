{"version":3,"file":"data-layer.cjs","sources":["../../src/js/data-layer.js"],"sourcesContent":["(function(){\n  function initDataLayer() {\n    /**\n     * Push events to data layer (Google Analytics)\n     * Used by Header and General events\n     * Required\n     */\n    const pushGAEvent = (event) => {\n      window.dataLayer = window.dataLayer || [];\n      const { dataLayer } = window;\n      if (dataLayer) dataLayer.push(event);\n    };\n\n    /**\n     * Header click events\n     * Elements with attribute [data-ga-header]\n     * 1 of 2 Header data layer functions\n     */\n    document.querySelectorAll('[data-ga-header]')?.forEach((element) =>\n      element.addEventListener('click', () => {\n        const event = element.getAttribute('data-ga-header-event') || 'link';\n        let action = element.getAttribute('data-ga-header-action') || 'click';\n        const expanded = element.getAttribute('aria-expanded');\n        if(expanded) {\n          action = expanded === 'false' ? 'open' : 'close';\n        }\n        const type = element.getAttribute('data-ga-header-type') || 'internal link';\n        const section = element.getAttribute('data-ga-header-section') || 'main navbar';\n        const text = element.getAttribute('data-ga-header') || '';\n        const component = element.getAttribute('data-ga-header-component');\n\n        pushGAEvent({\n          name: 'onclick',\n          event: event.toLowerCase(),\n          action: action.toLowerCase(),\n          type: type.toLowerCase(),\n          section: section.toLowerCase(),\n          region: 'navbar',\n          text: text.toLowerCase(),\n          ...(component && {\n            component: component.toLowerCase(),\n          }),\n        });\n      })\n    );\n\n    /**\n     * Header search change events\n     * Search element with attribute [data-ga-input-header-event]\n     * 2 of 2 Header data layer functions\n     */\n    document.querySelectorAll('[data-ga-input-header-event]')?.forEach((element) =>\n      element.addEventListener('change', (e) => {\n        const event = element.getAttribute('data-ga-input-header-event') || '';\n        const text = e.target.value || '';\n\n        pushGAEvent({\n          name: 'onenter',\n          action: 'type',\n          type: 'main search',\n          section: 'topbar',\n          region: 'navbar',\n          text: text.toLowerCase(),\n          event: event.toLowerCase()\n        });\n      })\n    );\n\n    /**\n     * General click events\n     * Elements with attribute [data-ga]\n     * 1 of 2 General data layer functions\n     */\n    document.querySelectorAll('[data-ga]')?.forEach((element) =>\n      element.addEventListener('click', () => {\n        const name = element.getAttribute('data-ga-name') || '';\n        const event = element.getAttribute('data-ga-event') || '';\n        let action = element.getAttribute('data-ga-action') || '';\n        const expanded = element.getAttribute('aria-expanded');\n        if(expanded) {\n          action = expanded === 'false' ? 'open' : 'close';\n        }\n        const type = element.getAttribute('data-ga-type') || '';\n        const section = element.getAttribute('data-ga-section') || '';\n        const region = element.getAttribute('data-ga-region') || '';\n        const text = element.getAttribute('data-ga') || '';\n        const component = element.getAttribute('data-ga-component') || '';\n\n        pushGAEvent({\n          name: name.toLowerCase(),\n          event: event.toLowerCase(),\n          action: action.toLowerCase(),\n          type: type.toLowerCase(),\n          section: section.toLowerCase(),\n          region: region.toLowerCase(),\n          text: text.toLowerCase(),\n          component: component.toLowerCase(),\n        });\n      })\n    );\n\n    /**\n     * Input change event\n     * Input elementa with attribute [data-ga-input]\n     * 2 of 2 General data layer functions\n     */\n    document.querySelectorAll('[data-ga-input]')?.forEach((element) =>\n      element.addEventListener('change', (e) => {\n        const name = element.getAttribute(\"data-ga-input-name\") || \"\";\n        const action = element.getAttribute(\"data-ga-input-action\") || \"\";\n        const type = element.getAttribute(\"data-ga-input\") || \"\";\n        const region = element.getAttribute(\"data-ga-input-region\") || \"\";\n        const section = element.getAttribute(\"data-ga-input-section\") || \"\";\n        let event = element.getAttribute(\"data-ga-input-event\") || \"\";\n        let text;\n        switch(type){\n          case 'checkbox':\n            // elements with attribute [data-ga-input=\"checkbox\"]\n            text = e.target.labels[0].textContent || '';\n            event = e.target.checked ? event : \"deselect\";\n            break;\n          case 'radio button':\n            // elements with attribute [data-ga-input=\"radio button\"]\n            text = e.target.labels[0].textContent || '';\n            break;\n          case 'blur':\n            // elements with attribute [data-ga-input=\"blur\"]\n            text = e.target.value.toLowerCase() || '';\n            break;\n          default:\n            // Select elements\n            text = [...e.target.selectedOptions].map(option=>option.value).join(',') || '';\n            break;\n        }\n\n        pushGAEvent({\n          name: name.toLowerCase(),\n          event: event.toLowerCase(),\n          action: action.toLowerCase(),\n          type: type.toLowerCase(),\n          section: section.toLowerCase(),\n          region: region.toLowerCase(),\n          text: text.toLowerCase()\n        });\n      })\n    );\n  }\n\n  /* Function must be initialized after document load\n   * Example:\n   *   window.initDataLayer();\n   */\n  window.initDataLayer = window.initDataLayer || initDataLayer;\n})();\n"],"names":["initDataLayer","pushGAEvent","event","dataLayer","_a","element","action","expanded","type","section","text","component","_b","_c","name","region","_d","option"],"mappings":"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"}