{"version":3,"file":"data-layer.es","sources":["../../src/js/data-layer.js"],"sourcesContent":["(function(){\n  function initDataLayer() {\n    /**\n     * Push events to data layer (Google Analytics)\n     * Used by Header and General events\n     * Required\n     */\n    const pushGAEvent = (event) => {\n      window.dataLayer = window.dataLayer || [];\n      const { dataLayer } = window;\n      if (dataLayer) dataLayer.push(event);\n    };\n\n    /**\n     * Header click events\n     * Elements with attribute [data-ga-header]\n     * 1 of 2 Header data layer functions\n     */\n    document.querySelectorAll('[data-ga-header]')?.forEach((element) =>\n      element.addEventListener('click', () => {\n        const event = element.getAttribute('data-ga-header-event') || 'link';\n        let action = element.getAttribute('data-ga-header-action') || 'click';\n        const expanded = element.getAttribute('aria-expanded');\n        if(expanded) {\n          action = expanded === 'false' ? 'open' : 'close';\n        }\n        const type = element.getAttribute('data-ga-header-type') || 'internal link';\n        const section = element.getAttribute('data-ga-header-section') || 'main navbar';\n        const text = element.getAttribute('data-ga-header') || '';\n        const component = element.getAttribute('data-ga-header-component');\n\n        pushGAEvent({\n          name: 'onclick',\n          event: event.toLowerCase(),\n          action: action.toLowerCase(),\n          type: type.toLowerCase(),\n          section: section.toLowerCase(),\n          region: 'navbar',\n          text: text.toLowerCase(),\n          ...(component && {\n            component: component.toLowerCase(),\n          }),\n        });\n      })\n    );\n\n    /**\n     * Header search change events\n     * Search element with attribute [data-ga-input-header-event]\n     * 2 of 2 Header data layer functions\n     */\n    document.querySelectorAll('[data-ga-input-header-event]')?.forEach((element) =>\n      element.addEventListener('change', (e) => {\n        const event = element.getAttribute('data-ga-input-header-event') || '';\n        const text = e.target.value || '';\n\n        pushGAEvent({\n          name: 'onenter',\n          action: 'type',\n          type: 'main search',\n          section: 'topbar',\n          region: 'navbar',\n          text: text.toLowerCase(),\n          event: event.toLowerCase()\n        });\n      })\n    );\n\n    /**\n     * General click events\n     * Elements with attribute [data-ga]\n     * 1 of 2 General data layer functions\n     */\n    document.querySelectorAll('[data-ga]')?.forEach((element) =>\n      element.addEventListener('click', () => {\n        const name = element.getAttribute('data-ga-name') || '';\n        const event = element.getAttribute('data-ga-event') || '';\n        let action = element.getAttribute('data-ga-action') || '';\n        const expanded = element.getAttribute('aria-expanded');\n        if(expanded) {\n          action = expanded === 'false' ? 'open' : 'close';\n        }\n        const type = element.getAttribute('data-ga-type') || '';\n        const section = element.getAttribute('data-ga-section') || '';\n        const region = element.getAttribute('data-ga-region') || '';\n        const text = element.getAttribute('data-ga') || '';\n        const component = element.getAttribute('data-ga-component') || '';\n\n        pushGAEvent({\n          name: name.toLowerCase(),\n          event: event.toLowerCase(),\n          action: action.toLowerCase(),\n          type: type.toLowerCase(),\n          section: section.toLowerCase(),\n          region: region.toLowerCase(),\n          text: text.toLowerCase(),\n          component: component.toLowerCase(),\n        });\n      })\n    );\n\n    /**\n     * Input change event\n     * Input elementa with attribute [data-ga-input]\n     * 2 of 2 General data layer functions\n     */\n    document.querySelectorAll('[data-ga-input]')?.forEach((element) =>\n      element.addEventListener('change', (e) => {\n        const name = element.getAttribute(\"data-ga-input-name\") || \"\";\n        const action = element.getAttribute(\"data-ga-input-action\") || \"\";\n        const type = element.getAttribute(\"data-ga-input\") || \"\";\n        const region = element.getAttribute(\"data-ga-input-region\") || \"\";\n        const section = element.getAttribute(\"data-ga-input-section\") || \"\";\n        let event = element.getAttribute(\"data-ga-input-event\") || \"\";\n        let text;\n        switch(type){\n          case 'checkbox':\n            // elements with attribute [data-ga-input=\"checkbox\"]\n            text = e.target.labels[0].textContent || '';\n            event = e.target.checked ? event : \"deselect\";\n            break;\n          case 'radio button':\n            // elements with attribute [data-ga-input=\"radio button\"]\n            text = e.target.labels[0].textContent || '';\n            break;\n          case 'blur':\n            // elements with attribute [data-ga-input=\"blur\"]\n            text = e.target.value.toLowerCase() || '';\n            break;\n          default:\n            // Select elements\n            text = [...e.target.selectedOptions].map(option=>option.value).join(',') || '';\n            break;\n        }\n\n        pushGAEvent({\n          name: name.toLowerCase(),\n          event: event.toLowerCase(),\n          action: action.toLowerCase(),\n          type: type.toLowerCase(),\n          section: section.toLowerCase(),\n          region: region.toLowerCase(),\n          text: text.toLowerCase()\n        });\n      })\n    );\n  }\n\n  /* Function must be initialized after document load\n   * Example:\n   *   window.initDataLayer();\n   */\n  window.initDataLayer = window.initDataLayer || initDataLayer;\n})();\n"],"names":["initDataLayer","pushGAEvent","event","dataLayer","_a","element","action","expanded","type","section","text","component","_b","_c","name","region","_d","option"],"mappings":"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"}